{# relies on a variable "user" of type "model.User" #}

{% extends "layout.html" %}
{% block content %}
<div class="container">
    <h2>Create a new user account</h2>

    {% if errors %}
    <div class="row">
        <ul class="alert alert-danger col-sm-offset-2 col-sm-6">
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <form action="/user" method="POST" class="form-horizontal">
        <div class="form-group">
            <label for="given_name" class="col-sm-2 control-label">
                First Name:
            </label>
            <div class="col-sm-6">
                <input type="text" class="col-sm-6 form-control" 
                        name="given_name" value="{{ user.given_name }}" />
            </div>
        </div>
        <div class="form-group">
            <label for="last_name" class="col-sm-2 control-label">
                Last Name:
            </label>
            <div class="col-sm-6">
                <input type="text" class="form-control" 
                        name="family_name" value="{{ user.family_name }}" />
            </div>
        </div>
        <div class="form-group">
            <label for="username" class="col-sm-2 control-label">
                Username:
            </label>
            <div class="col-sm-6">
                <input type="text" class="form-control" 
                        name="username" value="{{ user.username }}" />
            </div>
        </div>
        <div class="form-group">
            <label for="email" class="col-sm-2 control-label">
                Email Address:
            </label>
            <div class="col-sm-6">
                <input type="text" class="form-control" 
                        name="email" value="{{ user.email }}" />
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label">
                Preliminary Password:
            </label>
            <div class="col-sm-6">
                <input type="password" class="form-control"
                        name="password" value="{{ user.password }}" />
            </div>
        </div>
        <div class="form-group">
            <label for="password2" class="col-sm-2 control-label">
                Password (repeat):
            </label>
            <div class="col-sm-6">
                <input type="password" class="form-control"
                        name="password2" value="{{ user.password2 }}"/>
            </div>
        </div>
        <div style='display: none'>
            <input type="hidden" name="solution" 
                    value="{{ captcha.solution_hash() }}" />
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-6">
                <img src='{{ captcha.datauri() }}'>
                <p class="help-block">
                    Type the letters and numbers in the box
                </p>
                <label for="response">
                    Answer:
                </label>
                <input type="text" class="form-control" name="response" />
            </div>
        </div>
        <div class="col-sm-offset-2 col-sm-6">
            <button type="submit" class="btn btn-primary btn-lg">
                Sign up
            </button>
        </div>
    </form>
</div>
{% endblock %}
